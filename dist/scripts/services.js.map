{"version":3,"sources":["services.js"],"names":["httpFn","$inject","alertFn","angular","module","service","totalsFn","$http","simplefetch","url","get","then","res","data","catch","err","masterArr","calculateTotal","what","reduce","a","b","calculateTotals","totalWt","matlCost","laborCost","totalCost","lmtrs","collateThisComponent","obj","find","item","id","findIndex","push","removeThisComponent","splice","$uibModal","$rootScope","show","controller","as","template","console","log","open","controllerAs","templateUrl","showprogress","progress"],"mappings":";;AACAA,OAAOC,OAAP,GAAiB,CAAC,OAAD,CAAjB;AACAC,QAAQD,OAAR,GAAkB,CAAC,WAAD,EAAc,YAAd,CAAlB,CAFAE,QACEC,MADF,CACS,WADT,EAEEC,OAFF,CAEU,MAFV,EAEkBL,MAFlB,EAGEK,OAHF,CAGU,QAHV,EAGoBC,QAHpB,EAIED,OAJF,CAIU,OAJV,EAImBH,OAJnB;;AAMA,SAASF,MAAT,CAAgBO,KAAhB,EAAsB;AACrB;;AACA,QAAO;AACNC,eAAa,qBAASC,GAAT,EAAc;AAC1B,UAAOF,MAAMG,GAAN,CAAUD,GAAV,EAAeE,IAAf,CAAoB,UAAAC,GAAA;AAAA,WAAAA,IAAAC,IAAA;AAAA,IAApB,EAAuCC,KAAvC,CAA6C,UAAAC,GAAA;AAAA,WAAAA,GAAA;AAAA,IAA7C,CAAP;AAGA;AALK,EAAP;AAOA;;AAAD,SAAST,QAAT,GAAmB;AAAA;;AAClB,MAAKU,SAAL,GAAiB,EAAjB;;AAEA,KAAIC,iBAAiB,SAAjBA,cAAiB,CAAAC,IAAA;AAAA,SAAA,MAAAF,SAAA,CAAAG,MAAA,CAAA,UAAAC,CAAA,EAAAC,CAAA;AAAA,UAAAD,IAAAC,EAAAH,IAAA,CAAA;AAAA,GAAA,EAAA,CAAA,CAAA;AAAA,EAArB;AACA,MAAKI,eAAL,GAAuB,YAAA;AAGtB,QAAKC,OAAL,GAAeN,eAAe,SAAf,CAAf;AACA,QAAKO,QAAL,GAAgBP,eAAe,UAAf,CAAhB;AACA,QAAKQ,SAAL,GAAiBR,eAAe,WAAf,CAAjB;AACA,QAAKS,SAAL,GAAiBT,eAAe,WAAf,CAAjB;AACA,QAAKU,KAAL,GAAaV,eAAe,OAAf,CAAb;AACA,SAAO,EAACM,SAAS,MAAKA,OAAf,EAAwBC,UAAU,MAAKA,QAAvC,EAAiDC,WAAW,MAAKA,SAAjE,EAA4EC,WAAW,MAAKA,SAA5F,EAAuGC,OAAO,MAAKA,KAAnH,EAAP;AACA,EATD;;AASA,MAAKC,oBAAL,GAA4B,UAAAC,GAAA,EAAA;AAG3B,MAAG,MAAKb,SAAL,CAAec,IAAf,CAAoB;AAAA,UAAMC,KAAKC,EAAL,KAAUH,IAAIG,EAApB;AAAA,GAApB,CAAH,EAAgD,MAAKhB,SAAL,CAAe,MAAKA,SAAL,CAAeiB,SAAf,CAAyB;AAAA,UAAMF,KAAKC,EAAL,KAAUH,IAAIG,EAApB;AAAA,GAAzB,CAAf,IAAmEH,GAAnE,CAAhD,KACM,MAAKb,SAAL,CAAekB,IAAf,CAAoBL,GAApB;AACN,SAAO,MAAKP,eAAL,EAAP;AACA,EAND;;AAMA,MAAKa,mBAAL,GAA2B,UAAAN,GAAA,EAAA;AAG1B,QAAKb,SAAL,CAAeoB,MAAf,CAAsB,MAAKpB,SAAL,CAAeiB,SAAf,CAAyB;AAAA,UAAMF,KAAKC,EAAL,KAAUH,IAAIG,EAApB;AAAA,GAAzB,CAAtB,EAAwE,CAAxE;AACA,SAAO,MAAKV,eAAL,EAAP;AACA,EALD;AAMA;;AAAD,SAASpB,OAAT,CAAiBmC,SAAjB,EAA4BC,UAA5B,EAAuC;AACtC;;AAEG,UAASC,IAAT,CAAcC,UAAd,EAA0BC,EAA1B,EAA8BC,QAA9B,EAAuC;;AAEnC,MAAG,CAACA,QAAJ,EAAa;AACTA,cAAW,2CAAX;AAGH;;AAADC,UAAQC,GAAR,CAAYJ,UAAZ;AACA,SAAOH,UAAUQ,IAAV,CAAe;AAClBL,eAAYA,UADM;AAElBM,iBAAcL,EAFI;AAGlBM,gBAAaL;AAHK,GAAf,CAAP;AAOH;;AAAD,UAASM,YAAT,GAAuB,CAItB;;AAAD,QAAO;AACHT,QAAMA,IADH;AAEHU,YAAUD;AAFP,EAAP;AAIH","file":"services.js","sourcesContent":["angular\r\n\t.module('estimator')\r\n\t.service('http', httpFn)\r\n\t.service('totals', totalsFn)\r\n\t.service('modal', alertFn);\r\n\r\nfunction httpFn($http){\r\n\t\"ngInject\";\r\n\treturn {\r\n\t\tsimplefetch: function(url) { \r\n\t\t\treturn $http.get(url).then((res) => res.data).catch((err) => err);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction totalsFn(){\r\n\tthis.masterArr = [];\r\n\r\n\tlet calculateTotal = (what) => this.masterArr.reduce((a, b) => a+b[what], 0);\r\n\tthis.calculateTotals = () => {\r\n\t\tthis.totalWt = calculateTotal('totalWt');\r\n\t\tthis.matlCost = calculateTotal('matlCost');\r\n\t\tthis.laborCost = calculateTotal('laborCost');\r\n\t\tthis.totalCost = calculateTotal('totalCost');\r\n\t\tthis.lmtrs = calculateTotal('lmtrs');\r\n\t\treturn {totalWt: this.totalWt, matlCost: this.matlCost, laborCost: this.laborCost, totalCost: this.totalCost, lmtrs: this.lmtrs};\r\n\t};\r\n\r\n\tthis.collateThisComponent = (obj) => {\r\n\t\tif(this.masterArr.find(item=>item.id===obj.id)) this.masterArr[this.masterArr.findIndex(item=>item.id===obj.id)] = obj;\r\n\t\t\telse this.masterArr.push(obj);\r\n\t\treturn this.calculateTotals();\r\n\t};\r\n\r\n\tthis.removeThisComponent = (obj) => {\r\n\t\tthis.masterArr.splice(this.masterArr.findIndex(item=>item.id===obj.id), 1);\r\n\t\treturn this.calculateTotals();\r\n\t};\r\n}\r\n\r\nfunction alertFn($uibModal, $rootScope){\r\n\t\"ngInject\";\r\n        \r\n    function show(controller, as, template){\r\n\r\n        if(!template){\r\n            template = \"scripts/components/home/modaldefault.html\";\r\n        }\r\n        \r\n        console.log(controller);\r\n        return $uibModal.open({\r\n            controller: controller,\r\n            controllerAs: as,\r\n            templateUrl: template\r\n        });\r\n    }\r\n    \r\n    function showprogress(){\r\n        \r\n    }\r\n    \r\n    return {\r\n        show: show,\r\n        progress: showprogress\r\n    };\r\n}"]}